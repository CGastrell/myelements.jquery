String.prototype.rsplit=function(e){for(var t=this,n=e.exec(t),r=new Array;null!=n;){{var o=n.index;e.lastIndex}if(0!=o){{t.substring(0,o)}r.push(t.substring(0,o)),t=t.slice(o)}r.push(n[0]),t=t.slice(n[0].length),n=e.exec(t)}return""==!t&&r.push(t),r},String.prototype.chop=function(){return this.substr(0,this.length-1)};var EjsScanner=function(e,t,n){this.left_delimiter=t+"%",this.right_delimiter="%"+n,this.double_left=t+"%%",this.double_right="%%"+n,this.left_equal=t+"%=",this.left_comment=t+"%#",this.SplitRegexp="["==t?/(\[%%)|(%%\])|(\[%=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/:new RegExp("("+this.double_left+")|(%%"+this.double_right+")|("+this.left_equal+")|("+this.left_comment+")|("+this.left_delimiter+")|("+this.right_delimiter+"\n)|("+this.right_delimiter+")|(\n)"),this.source=e,this.stag=null,this.lines=0};EjsView=function(e){this.data=e},EjsView.prototype.partial=function(e,t){return t||(t=this.data),new EJS(e).render(t)},EjsScanner.to_text=function(e){return null==e||void 0===e?"":e instanceof Date?e.toDateString():e.toString?e.toString():""},EjsScanner.prototype={scan:function(e){if(scanline=this.scanline,regex=this.SplitRegexp,""==!this.source)for(var t=this.source.rsplit(/\n/),n=0;n<t.length;n++){var r=t[n];this.scanline(r,regex,e)}},scanline:function(e,t,n){this.lines++;for(var r=e.rsplit(t),o=0;o<r.length;o++){var i=r[o];if(null!=i)try{n(i,this)}catch(a){throw{type:"EjsScanner",line:this.lines}}}}};var EjsBuffer=function(e,t){this.line=new Array,this.script="",this.pre_cmd=e,this.post_cmd=t;for(var n=0;n<this.pre_cmd.length;n++)this.push(e[n])};EjsBuffer.prototype={push:function(e){this.line.push(e)},cr:function(){this.script=this.script+this.line.join("; "),this.line=new Array,this.script=this.script+"\n"},close:function(){if(this.line.length>0){for(var e=0;e<this.post_cmd.length;e++)this.push(pre_cmd[e]);this.script=this.script+this.line.join("; "),line=null}}},EjsCompiler=function(e,t){this.pre_cmd=['___ejsO = "";'],this.post_cmd=new Array,this.source=" ",null!=e&&("string"==typeof e?(e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),this.source=e):e.innerHTML&&(this.source=e.innerHTML),"string"!=typeof this.source&&(this.source="")),t=t||"<";var n=">";switch(t){case"[":n="]";break;case"<":break;default:throw t+" is not a supported deliminator"}this.scanner=new EjsScanner(this.source,t,n),this.out=""},EjsCompiler.prototype={compile:function(options){options=options||{},this.out="";var put_cmd="___ejsO += ",insert_cmd=put_cmd,buff=new EjsBuffer(this.pre_cmd,this.post_cmd),content="",clean=function(e){return e=e.replace(/\\/g,"\\\\"),e=e.replace(/\n/g,"\\n"),e=e.replace(/"/g,'\\"')};this.scanner.scan(function(e,t){if(null==t.stag)switch(e){case"\n":content+="\n",buff.push(put_cmd+'"'+clean(content)+'";'),buff.cr(),content="";break;case t.left_delimiter:case t.left_equal:case t.left_comment:t.stag=e,content.length>0&&buff.push(put_cmd+'"'+clean(content)+'"'),content="";break;case t.double_left:content+=t.left_delimiter;break;default:content+=e}else switch(e){case t.right_delimiter:switch(t.stag){case t.left_delimiter:"\n"==content[content.length-1]?(content=content.chop(),buff.push(content),buff.cr()):buff.push(content);break;case t.left_equal:buff.push(insert_cmd+"(EjsScanner.to_text("+content+"))")}t.stag=null,content="";break;case t.double_right:content+=t.right_delimiter;break;default:content+=e}}),content.length>0&&buff.push(put_cmd+'"'+clean(content)+'"'),buff.close(),this.out=buff.script+";";var to_be_evaled="this.process = function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {"+this.out+" return ___ejsO;}}}catch(e){e.lineNumber=null;throw e;}};";try{eval(to_be_evaled)}catch(e){if("undefined"==typeof JSLINT)throw e;JSLINT(this.out);for(var i=0;i<JSLINT.errors.length;i++){var error=JSLINT.errors[i];if("Unnecessary semicolon."!=error.reason){error.line++;var e=new Error;throw e.lineNumber=error.line,e.message=error.reason,options.url&&(e.fileName=options.url),e}}}}},EJS=function(e){if(this.set_options(e),e.url){var t=EJS.get(e.url,this.cache);if(t)return t;if(t==EJS.INVALID_PATH)return null;if(this.text=EJS.request(e.url),null==this.text)throw"There is no template at "+e.url;this.name=e.url}else if(e.element){if("string"==typeof e.element){var n=e.element;if(e.element=document.getElementById(e.element),null==e.element)throw n+"does not exist!"}this.text=e.element.value?e.element.value:e.element.innerHTML,this.name=e.element.id,this.type="["}var t=new EjsCompiler(this.text,this.type);t.compile(e),EJS.update(this.name,this),this.template=t},EJS.config=function(e){EJS.cache=null!=e.cache?e.cache:EJS.cache,EJS.type=null!=e.type?e.type:EJS.type;var t={};EJS.get=function(e,n){return 0==n?null:t[e]?t[e]:null},EJS.update=function(e,n){null!=e&&(t[e]=n)},EJS.INVALID_PATH=-1},EJS.config({cache:!0,type:"<"}),EJS.prototype={render:function(e){var t=new EjsView(e);return this.template.process.call(t,e,t)},out:function(){return this.template.out},set_options:function(e){this.type=null!=e.type?e.type:EJS.type,this.cache=null!=e.cache?e.cache:EJS.cache,this.text=null!=e.text?e.text:null,this.name=null!=e.name?e.name:null},update:function(element,options){return"string"==typeof element&&(element=document.getElementById(element)),null==options?(_template=this,function(e){EJS.prototype.update.call(_template,element,e)}):void("string"==typeof options?(params={},params.url=options,_template=this,params.onComplete=function(request){var object=eval(request.responseText);EJS.prototype.update.call(_template,element,object)},EJS.ajax_request(params)):element.innerHTML=this.render(options))}},EJS.newRequest=function(){for(var e=[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=0;t<e.length;t++)try{var n=e[t]();if(null!=n)return n}catch(r){continue}},EJS.request=function(e){var t=new EJS.newRequest;t.open("GET",e,!1);try{t.send(null)}catch(n){return null}return 404==t.status||2==t.status||0==t.status&&""==t.responseText?null:t.responseText},EJS.ajax_request=function(e){e.method=e.method?e.method:"GET";var t=new EJS.newRequest;t.onreadystatechange=function(){4==t.readyState&&e.onComplete(200==t.status?t:t)},t.open(e.method,e.url),t.send(null)},EjsView.prototype.date_tag=function(e,t){t instanceof Date||(t=new Date);for(var n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=[],o=[],i=[],a=t.getFullYear(),s=t.getMonth(),u=t.getDate(),c=a-15;a+15>c;c++)r.push({value:c,text:c});for(var f=0;12>f;f++)o.push({value:f,text:n[f]});for(var l=0;31>l;l++)i.push({value:l+1,text:l+1});var d=this.select_tag(e+"[year]",a,r,{id:e+"[year]"}),p=this.select_tag(e+"[month]",s,o,{id:e+"[month]"}),h=this.select_tag(e+"[day]",u,i,{id:e+"[day]"});return d+p+h},EjsView.prototype.form_tag=function(e,t){return t=t||{},t.action=e,1==t.multipart&&(t.method="post",t.enctype="multipart/form-data"),this.start_tag_for("form",t)},EjsView.prototype.form_tag_end=function(){return this.tag_end("form")},EjsView.prototype.hidden_field_tag=function(e,t,n){return this.input_field_tag(e,t,"hidden",n)},EjsView.prototype.input_field_tag=function(e,t,n,r){return r=r||{},r.id=r.id||e,r.value=t||"",r.type=n||"text",r.name=e,this.single_tag_for("input",r)},EjsView.prototype.is_current_page=function(e){return window.location.href==e||window.location.pathname==e?!0:!1},EjsView.prototype.link_to=function(e,t,n){if(!e)var e="null";if(!n)var n={};return n.confirm&&(n.onclick=' var ret_confirm = confirm("'+n.confirm+'"); if(!ret_confirm){ return false;} ',n.confirm=null),n.href=t,this.start_tag_for("a",n)+e+this.tag_end("a")},EjsView.prototype.submit_link_to=function(e,t,n){if(!e)var e="null";if(!n)var n={};return n.onclick=n.onclick||"",n.confirm&&(n.onclick=' var ret_confirm = confirm("'+n.confirm+'"); if(!ret_confirm){ return false;} ',n.confirm=null),n.value=e,n.type="submit",n.onclick=n.onclick+(t?this.url_for(t):"")+"return false;",this.start_tag_for("input",n)},EjsView.prototype.link_to_if=function(e,t,n,r,o,i){return this.link_to_unless(0==e,t,n,r,o,i)},EjsView.prototype.link_to_unless=function(e,t,n,r,o){return r=r||{},e?o&&"function"==typeof o?o(t,n,r,o):t:this.link_to(t,n,r)},EjsView.prototype.link_to_unless_current=function(e,t,n,r){return n=n||{},this.link_to_unless(this.is_current_page(t),e,t,n,r)},EjsView.prototype.password_field_tag=function(e,t,n){return this.input_field_tag(e,t,"password",n)},EjsView.prototype.select_tag=function(e,t,n,r){r=r||{},r.id=r.id||e,r.value=t,r.name=e;var o="";o+=this.start_tag_for("select",r);for(var i=0;i<n.length;i++){var a=n[i],s={value:a.value};a.value==t&&(s.selected="selected"),o+=this.start_tag_for("option",s)+a.text+this.tag_end("option")}return o+=this.tag_end("select")},EjsView.prototype.single_tag_for=function(e,t){return this.tag(e,t,"/>")},EjsView.prototype.start_tag_for=function(e,t){return this.tag(e,t)},EjsView.prototype.submit_tag=function(e,t){return t=t||{},t.type=t.type||"submit",t.value=e||"Submit",this.single_tag_for("input",t)},EjsView.prototype.tag=function(e,t,n){if(!n)var n=">";var r=" ";for(var o in t){if(null!=t[o])var i=t[o].toString();else var i="";"Class"==o&&(o="class"),r+=-1!=i.indexOf("'")?o+'="'+i+'" ':o+"='"+i+"' "}return"<"+e+r+n},EjsView.prototype.tag_end=function(e){return"</"+e+">"},EjsView.prototype.text_area_tag=function(e,t,n){return n=n||{},n.id=n.id||e,n.name=n.name||e,t=t||"",n.size&&(n.cols=n.size.split("x")[0],n.rows=n.size.split("x")[1],delete n.size),n.cols=n.cols||50,n.rows=n.rows||4,this.start_tag_for("textarea",n)+t+this.tag_end("textarea")},EjsView.prototype.text_tag=EjsView.prototype.text_area_tag,EjsView.prototype.text_field_tag=function(e,t,n){return this.input_field_tag(e,t,"text",n)},EjsView.prototype.url_for=function(e){return'window.location="'+e+'";'},EjsView.prototype.img_tag=function(e,t,n){return n=n||{},n.src=e,n.alt=t,this.single_tag_for("img",n)}(function(){var e,t,n,r;!function(){var o={},i={};e=function(e,t,n){o[e]={deps:t,callback:n}},r=n=t=function(e){function n(t){if("."!==t.charAt(0))return t;for(var n=t.split("/"),r=e.split("/").slice(0,-1),o=0,i=n.length;i>o;o++){var a=n[o];if(".."===a)r.pop();else{if("."===a)continue;r.push(a)}}return r.join("/")}if(r._eak_seen=o,i[e])return i[e];if(i[e]={},!o[e])throw new Error("Could not find module "+e);for(var a,s=o[e],u=s.deps,c=s.callback,f=[],l=0,d=u.length;d>l;l++)f.push("exports"===u[l]?a={}:t(n(u[l])));var p=c.apply(this,f);return i[e]=a||p}}(),e("promise/all",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to all.");return new t(function(t,n){function r(e){return function(t){i(e,t)}}function i(e,n){s[e]=n,0===--u&&t(s)}var a,s=[],u=e.length;0===u&&t([]);for(var c=0;c<e.length;c++)a=e[c],a&&o(a.then)?a.then(r(c),n):i(c,a)})}var r=e.isArray,o=e.isFunction;t.all=n}),e("promise/asap",["exports"],function(e){"use strict";function t(){return function(){process.nextTick(o)}}function n(){var e=0,t=new u(o),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function r(){return function(){c.setTimeout(o,1)}}function o(){for(var e=0;e<f.length;e++){var t=f[e],n=t[0],r=t[1];n(r)}f=[]}function i(e,t){var n=f.push([e,t]);1===n&&a()}var a,s="undefined"!=typeof window?window:{},u=s.MutationObserver||s.WebKitMutationObserver,c="undefined"!=typeof global?global:void 0===this?window:this,f=[];a="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?t():u?n():r(),e.asap=i}),e("promise/config",["exports"],function(e){"use strict";function t(e,t){return 2!==arguments.length?n[e]:void(n[e]=t)}var n={instrument:!1};e.config=n,e.configure=t}),e("promise/polyfill",["./promise","./utils","exports"],function(e,t,n){"use strict";function r(){var e;e="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var t="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),i(t)}();t||(e.Promise=o)}var o=e.Promise,i=t.isFunction;n.polyfill=r}),e("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(e,t,n,r,o,i,a,s){"use strict";function u(e){if(!_(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof u))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],c(e,this)}function c(e,t){function n(e){h(t,e)}function r(e){g(t,e)}try{e(n,r)}catch(o){r(o)}}function f(e,t,n,r){var o,i,a,s,u=_(n);if(u)try{o=n(r),a=!0}catch(c){s=!0,i=c}else o=r,a=!0;p(t,o)||(u&&a?h(t,o):s?g(t,i):e===O?h(t,o):e===N&&g(t,o))}function l(e,t,n,r){var o=e._subscribers,i=o.length;o[i]=t,o[i+O]=n,o[i+N]=r}function d(e,t){for(var n,r,o=e._subscribers,i=e._detail,a=0;a<o.length;a+=3)n=o[a],r=o[a+t],f(t,n,r,i);e._subscribers=null}function p(e,t){var n,r=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(b(t)&&(r=t.then,_(r)))return r.call(t,function(r){return n?!0:(n=!0,void(t!==r?h(e,r):m(e,r)))},function(t){return n?!0:(n=!0,void g(e,t))}),!0}catch(o){return n?!0:(g(e,o),!0)}return!1}function h(e,t){e===t?m(e,t):p(e,t)||m(e,t)}function m(e,t){e._state===j&&(e._state=k,e._detail=t,w.async(y,e))}function g(e,t){e._state===j&&(e._state=k,e._detail=t,w.async(v,e))}function y(e){d(e,e._state=O)}function v(e){d(e,e._state=N)}var w=e.config,b=(e.configure,t.objectOrFunction),_=t.isFunction,E=(t.now,n.all),S=r.race,x=o.resolve,I=i.reject,A=a.asap;w.async=A;var j=void 0,k=0,O=1,N=2;u.prototype={constructor:u,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var n=this,r=new this.constructor(function(){});if(this._state){var o=arguments;w.async(function(){f(n._state,r,o[n._state-1],n._detail)})}else l(this,r,e,t);return r},"catch":function(e){return this.then(null,e)}},u.all=E,u.race=S,u.resolve=x,u.reject=I,s.Promise=u}),e("promise/race",["./utils","exports"],function(e,t){"use strict";function n(e){var t=this;if(!r(e))throw new TypeError("You must pass an array to race.");return new t(function(t,n){for(var r,o=0;o<e.length;o++)r=e[o],r&&"function"==typeof r.then?r.then(t,n):t(r)})}var r=e.isArray;t.race=n}),e("promise/reject",["exports"],function(e){"use strict";function t(e){var t=this;return new t(function(t,n){n(e)})}e.reject=t}),e("promise/resolve",["exports"],function(e){"use strict";function t(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}e.resolve=t}),e("promise/utils",["exports"],function(e){"use strict";function t(e){return n(e)||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}var o=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=t,e.isFunction=n,e.isArray=r,e.now=o}),t("promise/polyfill").polyfill()}()),function(){"use strict";function e(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];return new d(function(e,r){var o=p.open(n.name,n.version);o.onerror=function(){r(o.error)},o.onupgradeneeded=function(){o.result.createObjectStore(n.storeName)},o.onsuccess=function(){n.db=o.result,t._dbInfo=n,e()}})}function t(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new d(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),t(e)},a.onerror=function(){r(a.error)}})["catch"](r)});return f(r,t),r}function n(e,t){var n=this,r=new d(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.openCursor();a.onsuccess=function(){var n=a.result;if(n){var r=e(n.value,n.key);void 0!==r?t(r):n["continue"]()}else t()},a.onerror=function(){r(a.error)}})["catch"](r)});return f(r,t),r}function r(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new d(function(n,o){r.ready().then(function(){var i=r._dbInfo,a=i.db.transaction(i.storeName,"readwrite").objectStore(i.storeName);null===t&&(t=void 0);var s=a.put(t,e);s.onsuccess=function(){void 0===t&&(t=null),n(t)},s.onerror=function(){o(s.error)}})["catch"](o)});return f(o,n),o}function o(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new d(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readwrite").objectStore(o.storeName),a=i["delete"](e);a.onsuccess=function(){t()},a.onerror=function(){r(a.error)},a.onabort=function(e){var t=e.target.error;"QuotaExceededError"===t&&r(t)}})["catch"](r)});return f(r,t),r}function i(e){var t=this,n=new d(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readwrite").objectStore(r.storeName),i=o.clear();i.onsuccess=function(){e()},i.onerror=function(){n(i.error)}})["catch"](n)});return f(n,e),n}function a(e){var t=this,n=new d(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}})["catch"](n)});return c(n,e),n}function s(e,t){var n=this,r=new d(function(t,r){return 0>e?void t(null):void n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=!1,s=i.openCursor();s.onsuccess=function(){var n=s.result;return n?void(0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e))):void t(null)},s.onerror=function(){r(s.error)}})["catch"](r)});return c(r,t),r}function u(e){var t=this,n=new d(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.openCursor(),a=[];i.onsuccess=function(){var t=i.result;return t?(a.push(t.key),void t["continue"]()):void e(a)},i.onerror=function(){n(i.error)}})["catch"](n)});return c(n,e),n}function c(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function f(e,t){t&&e.then(function(e){l(t,e)},function(e){t(e)})}function l(e,t){return e?setTimeout(function(){return e(null,t)},0):void 0}var d="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,p=p||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(p){var h={_driver:"asyncStorage",_initStorage:e,iterate:n,getItem:t,setItem:r,removeItem:o,clear:i,length:a,key:s,keys:u};"function"==typeof define&&define.amd?define("asyncStorage",function(){return h}):"undefined"!=typeof module&&module.exports?module.exports=h:this.asyncStorage=h}}.call(window),function(){"use strict";function e(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=n.name+"/",t._dbInfo=n,p.resolve()}function t(e){var t=this,n=new p(function(e,n){t.ready().then(function(){for(var n=t._dbInfo.keyPrefix,r=h.length-1;r>=0;r--){var o=h.key(r);0===o.indexOf(n)&&h.removeItem(o)}e()})["catch"](n)});return d(n,e),n}function n(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new p(function(t,r){n.ready().then(function(){try{var o=n._dbInfo,i=h.getItem(o.keyPrefix+e);i&&(i=u(i)),t(i)}catch(a){r(a)}})["catch"](r)});return d(r,t),r}function r(e,t){var n=this,r=new p(function(t,r){n.ready().then(function(){try{for(var o=n._dbInfo.keyPrefix,i=o.length,a=h.length,s=0;a>s;s++){var c=h.key(s),f=h.getItem(c);if(f&&(f=u(f)),f=e(f,c.substring(i)),void 0!==f)return void t(f)}t()}catch(l){r(l)}})["catch"](r)});return d(r,t),r}function o(e,t){var n=this,r=new p(function(t,r){n.ready().then(function(){var r,o=n._dbInfo;try{r=h.key(e)}catch(i){r=null}r&&(r=r.substring(o.keyPrefix.length)),t(r)})["catch"](r)});return d(r,t),r}function i(e){var t=this,n=new p(function(e,n){t.ready().then(function(){for(var n=t._dbInfo,r=h.length,o=[],i=0;r>i;i++)0===h.key(i).indexOf(n.keyPrefix)&&o.push(h.key(i).substring(n.keyPrefix.length));e(o)})["catch"](n)});return d(n,e),n}function a(e){var t=this,n=new p(function(e,n){t.keys().then(function(t){e(t.length)})["catch"](n)});return d(n,e),n}function s(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new p(function(t,r){n.ready().then(function(){var r=n._dbInfo;h.removeItem(r.keyPrefix+e),t()})["catch"](r)});return d(r,t),r}function u(e){if(e.substring(0,y)!==g)return JSON.parse(e);for(var t=e.substring(O),n=e.substring(y,O),r=new ArrayBuffer(2*t.length),o=new Uint16Array(r),i=t.length-1;i>=0;i--)o[i]=t.charCodeAt(i);switch(n){case v:return r;case w:return new Blob([r]);case b:return new Int8Array(r);case _:return new Uint8Array(r);case E:return new Uint8ClampedArray(r);case S:return new Int16Array(r);case I:return new Uint16Array(r);case x:return new Int32Array(r);case A:return new Uint32Array(r);case j:return new Float32Array(r);case k:return new Float64Array(r);default:throw new Error("Unkown type: "+n)}}function c(e){var t="",n=new Uint16Array(e);try{t=String.fromCharCode.apply(null,n)}catch(r){for(var o=0;o<n.length;o++)t+=String.fromCharCode(n[o])}return t}function f(e,t){var n="";if(e&&(n=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var r,o=g;e instanceof ArrayBuffer?(r=e,o+=v):(r=e.buffer,"[object Int8Array]"===n?o+=b:"[object Uint8Array]"===n?o+=_:"[object Uint8ClampedArray]"===n?o+=E:"[object Int16Array]"===n?o+=S:"[object Uint16Array]"===n?o+=I:"[object Int32Array]"===n?o+=x:"[object Uint32Array]"===n?o+=A:"[object Float32Array]"===n?o+=j:"[object Float64Array]"===n?o+=k:t(new Error("Failed to get type for BinaryArray"))),t(o+c(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var e=c(this.result);t(g+w+e)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(a){window.console.error("Couldn't convert value into a JSON string: ",e),t(a)}}function l(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new p(function(n,o){r.ready().then(function(){void 0===t&&(t=null);var i=t;f(t,function(t,a){if(a)o(a);else{try{var s=r._dbInfo;h.setItem(s.keyPrefix+e,t)}catch(u){("QuotaExceededError"===u.name||"NS_ERROR_DOM_QUOTA_REACHED"===u.name)&&o(u)}n(i)}})})["catch"](o)});return d(o,n),o}function d(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var p="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,h=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;h=this.localStorage}catch(m){return}var g="__lfsc__:",y=g.length,v="arbf",w="blob",b="si08",_="ui08",E="uic8",S="si16",x="si32",I="ur16",A="ui32",j="fl32",k="fl64",O=y+v.length,N={_driver:"localStorageWrapper",_initStorage:e,iterate:r,getItem:n,setItem:l,removeItem:s,clear:t,length:a,key:o,keys:i};"function"==typeof define&&define.amd?define("localStorageWrapper",function(){return N}):"undefined"!=typeof module&&module.exports?module.exports=N:this.localStorageWrapper=N}.call(window),function(){"use strict";function e(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];return new h(function(r,o){try{n.db=m(n.name,String(n.version),n.description,n.size)}catch(i){return t.setDriver("localStorageWrapper").then(function(){return t._initStorage(e)}).then(r)["catch"](o)}n.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,r()},function(e,t){o(t)})})})}function t(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new h(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=f(r)),t(r)},function(e,t){r(t)})})})["catch"](r)});return d(r,t),r}function n(e,t){var n=this,r=new h(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName,[],function(n,r){for(var o=r.rows,i=o.length,a=0;i>a;a++){var s=o.item(a),u=s.value;if(u&&(u=f(u)),u=e(u,s.key),void 0!==u)return void t(u)}t()},function(e,t){r(t)})})})["catch"](r)});return d(r,t),r}function r(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new h(function(n,o){r.ready().then(function(){void 0===t&&(t=null);var i=t;l(t,function(t,a){if(a)o(a);else{var s=r._dbInfo;s.db.transaction(function(r){r.executeSql("INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){n(i)},function(e,t){o(t)})},function(e){e.code===e.QUOTA_ERR&&o(e)})}})})["catch"](o)});return d(o,n),o}function o(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new h(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})})["catch"](r)});return d(r,t),r}function i(e){var t=this,n=new h(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})})["catch"](n)});return d(n,e),n}function a(e){var t=this,n=new h(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})})["catch"](n)});return d(n,e),n}function s(e,t){var n=this,r=new h(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})})["catch"](r)});return d(r,t),r}function u(e){var t=this,n=new h(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)},function(e,t){n(t)})})})["catch"](n)});return d(n,e),n}function c(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=p[n[t]>>2],r+=p[(3&n[t])<<4|n[t+1]>>4],r+=p[(15&n[t+1])<<2|n[t+2]>>6],r+=p[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function f(e){if(e.substring(0,y)!==g)return JSON.parse(e);var t,n,r,o,i,a=e.substring(O),s=e.substring(y,O),u=.75*a.length,c=a.length,f=0;"="===a[a.length-1]&&(u--,"="===a[a.length-2]&&u--);var l=new ArrayBuffer(u),d=new Uint8Array(l);for(t=0;c>t;t+=4)n=p.indexOf(a[t]),r=p.indexOf(a[t+1]),o=p.indexOf(a[t+2]),i=p.indexOf(a[t+3]),d[f++]=n<<2|r>>4,d[f++]=(15&r)<<4|o>>2,d[f++]=(3&o)<<6|63&i;switch(s){case v:return l;case w:return new Blob([l]);case b:return new Int8Array(l);case _:return new Uint8Array(l);case E:return new Uint8ClampedArray(l);case S:return new Int16Array(l);case I:return new Uint16Array(l);case x:return new Int32Array(l);case A:return new Uint32Array(l);case j:return new Float32Array(l);case k:return new Float64Array(l);default:throw new Error("Unkown type: "+s)}}function l(e,t){var n="";if(e&&(n=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var r,o=g;e instanceof ArrayBuffer?(r=e,o+=v):(r=e.buffer,"[object Int8Array]"===n?o+=b:"[object Uint8Array]"===n?o+=_:"[object Uint8ClampedArray]"===n?o+=E:"[object Int16Array]"===n?o+=S:"[object Uint16Array]"===n?o+=I:"[object Int32Array]"===n?o+=x:"[object Uint32Array]"===n?o+=A:"[object Float32Array]"===n?o+=j:"[object Float64Array]"===n?o+=k:t(new Error("Failed to get type for BinaryArray"))),t(o+c(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var e=c(this.result);t(g+w+e)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(a){window.console.error("Couldn't convert value into a JSON string: ",e),t(null,a)}}function d(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,m=this.openDatabase,g="__lfsc__:",y=g.length,v="arbf",w="blob",b="si08",_="ui08",E="uic8",S="si16",x="si32",I="ur16",A="ui32",j="fl32",k="fl64",O=y+v.length;if(m){var N={_driver:"webSQLStorage",_initStorage:e,iterate:n,getItem:t,setItem:r,removeItem:o,clear:i,length:a,key:s,keys:u};"function"==typeof define&&define.amd?define("webSQLStorage",function(){return N}):"undefined"!=typeof module&&module.exports?module.exports=N:this.webSQLStorage=N}}.call(window),function(){"use strict";function e(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function t(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(arguments[0][n]=p(t[n])?t[n].slice():t[n])}return arguments[0]}function n(e){for(var t in a)if(a.hasOwnProperty(t)&&a[t]===e)return!0;return!1}function r(n){this._config=t({},f,n),this._driverSet=null,this._ready=!1,this._dbInfo=null;for(var r=0;r<u.length;r++)e(this,u[r]);this.setDriver(this._config.driver)}var o="undefined"!=typeof module&&module.exports?require("promise"):this.Promise,i={},a={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},s=[a.INDEXEDDB,a.WEBSQL,a.LOCALSTORAGE],u=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],c={DEFINE:1,EXPORT:2,WINDOW:3},f={description:"",driver:s.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},l=c.WINDOW;"function"==typeof define&&define.amd?l=c.DEFINE:"undefined"!=typeof module&&module.exports&&(l=c.EXPORT);var d=function(e){var t=t||e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB,n={};return n[a.WEBSQL]=!!e.openDatabase,n[a.INDEXEDDB]=!!function(){if("undefined"!=typeof e.openDatabase&&e.navigator&&e.navigator.userAgent&&/Safari/.test(e.navigator.userAgent)&&!/Chrome/.test(e.navigator.userAgent))return!1;try{return t&&"function"==typeof t.open&&"undefined"!=typeof e.IDBKeyRange}catch(n){return!1}}(),n[a.LOCALSTORAGE]=!!function(){try{return e.localStorage&&"setItem"in e.localStorage&&e.localStorage.setItem}catch(t){return!1}}(),n}(this),p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},h=this;r.prototype.INDEXEDDB=a.INDEXEDDB,r.prototype.LOCALSTORAGE=a.LOCALSTORAGE,r.prototype.WEBSQL=a.WEBSQL,r.prototype.config=function(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},r.prototype.defineDriver=function(e,t,r){var a=new o(function(t,r){try{var a=e._driver,s=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),c=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void r(s);if(n(e._driver))return void r(c);for(var f=u.concat("_initStorage"),l=0;l<f.length;l++){var p=f[l];if(!p||!e[p]||"function"!=typeof e[p])return void r(s)}var h=o.resolve(!0);"_support"in e&&(h=e._support&&"function"==typeof e._support?e._support():o.resolve(!!e._support)),h.then(function(n){d[a]=n,i[a]=e,t()
},r)}catch(m){r(m)}});return a.then(t,r),a},r.prototype.driver=function(){return this._driver||null},r.prototype.ready=function(e){var t=this,n=new o(function(e,n){t._driverSet.then(function(){null===t._ready&&(t._ready=t._initStorage(t._config)),t._ready.then(e,n)})["catch"](n)});return n.then(e,e),n},r.prototype.setDriver=function(e,t,r){function a(){s._config.driver=s.driver()}var s=this;return"string"==typeof e&&(e=[e]),this._driverSet=new o(function(t,r){var a=s._getFirstSupportedDriver(e),u=new Error("No available storage method found.");if(!a)return s._driverSet=o.reject(u),void r(u);if(s._dbInfo=null,s._ready=null,n(a)){if(l===c.DEFINE)return void require([a],function(e){s._extend(e),t()});if(l===c.EXPORT){var f;switch(a){case s.INDEXEDDB:f=require("./drivers/indexeddb");break;case s.LOCALSTORAGE:f=require("./drivers/localstorage");break;case s.WEBSQL:f=require("./drivers/websql")}s._extend(f)}else s._extend(h[a])}else{if(!i[a])return s._driverSet=o.reject(u),void r(u);s._extend(i[a])}t()}),this._driverSet.then(a,a),this._driverSet.then(t,r),this._driverSet},r.prototype.supports=function(e){return!!d[e]},r.prototype._extend=function(e){t(this,e)},r.prototype._getFirstSupportedDriver=function(e){if(e&&p(e))for(var t=0;t<e.length;t++){var n=e[t];if(this.supports(n))return n}return null},r.prototype.createInstance=function(e){return new r(e)};var m=new r;l===c.DEFINE?define("localforage",function(){return m}):l===c.EXPORT?module.exports=m:this.localforage=m}.call(window),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.debug=e()}}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){function r(){return n.colors[f++%n.colors.length]}function o(e){function t(){}function o(){var e=o,t=+new Date,i=t-(c||t);e.diff=i,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;s++;var o=n.formatters[r];if("function"==typeof o){var i=a[s];t=o.call(e,i),a.splice(s,1),s--}return t}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(e,a));var u=o.log||n.log||console.log.bind(console);u.apply(e,a)}t.enabled=!1,o.enabled=!0;var i=n.enabled(e)?o:t;return i.namespace=e,i}function i(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,o=0;r>o;o++)t[o]&&(e=t[o].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function a(){n.enable("")}function s(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=o,n.coerce=u,n.disable=a,n.enable=i,n.enabled=s,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var c,f=0},{ms:2}],2:[function(e,t){function n(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"y":return n*f;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"h":return n*u;case"minutes":case"minute":case"m":return n*s;case"seconds":case"second":case"s":return n*a;case"ms":return n}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return i(e,c,"day")||i(e,u,"hour")||i(e,s,"minute")||i(e,a,"second")||e+" ms"}function i(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,u=60*s,c=24*u,f=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t.long?o(e):r(e)}},{}],3:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function i(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(t){}}function s(){var e;try{e=localStorage.debug}catch(t){}return e}n=t.exports=e("./debug"),n.log=i,n.formatArgs=o,n.save=a,n.load=s,n.useColors=r,n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(s())},{"./debug":1}]},{},[3])(3)}),myelements=io.connect("/myelements"),$myelements=$(myelements),$myelements.on("init",function(){myelements.initialize()}),myelements.on("error",function(){alert(arguments)}),jQuery.extend(myelements,{selector:".myelement",debug:debug("myelements:client"),initialize:function(){var e=this;this.whenOnline(function(){$(e).trigger("online")}),this.whenOffline(function(){$(e).trigger("offline")}),myelements.debug("myelements initialized")},initializeElement:function(e){myelements.processDataAttributes(e),myelements.attachDefaultEventHandlers(e),myelements.updateElementScope(e),$(e).on("formsubmit",function(t,n){$(e).trigger("userinput",n)}),$(e).trigger("init")},updateElementScope:function(e,t){var n=$(e).data().reactOnDataupdate,r=$(e).data().reactOnUserinput;if(t)myelements.doRender(e,t);else{if(!t&&n)return void myelements.recoverScopeFromCache(e,n);if(!t&&r){myelements.recoverScopeFromCache(e,r)}}},recoverScopeFromCache:function(e,t){var n={};myelements.debug("Trying to update Element Scope without data from scope: %s",t),myelements.localDataForElement(e,t,function(r,o){r&&(myelements.debug("Err: Updating element scope with empty object"),o=[]),n[t]=o,myelements.doRender(e,n)})},localDataForElement:function(e,t,n){localforage.getItem(t,function(e,r){return myelements.debug("Trying to get localstorage data for scope: %s",t),e?n(e,r):r?(myelements.debug("Got localstorage for scope: %s",t),n(null,r)):(myelements.debug("No localstorage for scope: %s",t),n(new Error("No localstorage data for DataId "+t)))})},doRender:function(e,t){e.template||(myelements.debug("Creating template for element with id %s",e.id),e.template=new EJS({element:e}));var n=e.template.render({data:t});e.innerHTML=n,myelements.handleFormSubmissions(e)},whenOnline:function(e){return window.phonegap?document.addEventListener("online",e,!1):void(window.addEventListener?this.addLocalEventListener(window,"online",e):document.body.ononline=e)},whenOffline:function(e){return window.phonegap?document.addEventListener("offline",e,!1):void(window.addEventListener?this.addLocalEventListener(window,"offline",e):document.body.onoffline=e)},addLocalEventListener:function(){return document.addEventListener?function(e,t,n){if(e&&e.nodeName||e===window)e.addEventListener(t,n,!1);else if(e&&e.length)for(var r=0;r<e.length;r++)addEvent(e[r],t,n)}:function(e,t,n){if(e&&e.nodeName||e===window)e.attachEvent("on"+t,function(){return n.call(e,window.event)});else if(e&&e.length)for(var r=0;r<e.length;r++)addEvent(e[r],t,n)}}(),attachDefaultEventHandlers:function(e){var t=$(e);$myelements.on("offline",function(){t.trigger("offline")}),$myelements.on("online",function(){t.trigger("online")}),myelements.on("disconnect",function(){t.trigger("disconnect")}),myelements.on("connect",function(){t.trigger("connect")}),myelements.on("reconnect",function(){t.trigger("reconnect")}),myelements.on("reconnecting",function(){t.trigger("reconnecting")}),myelements.on("reconnect_error",function(){t.trigger("reconnect_error")}),myelements.on("reconnect_failed",function(){t.trigger("reconnect_failed")})},processDataAttributes:function(e){var t=$(e),n=t.data();if(n.reactOnMessage&&myelements.on("message",function(){myelements.debug("myelements message '"+n.reactOnMessage+"' caught by data-react-on-event"),t.trigger(n.reactOnMessage)}),n.reactOnDataupdate){var r=n.reactOnDataupdate;myelements.on("message",function(n){if("dataupdate"===n.event&&n.data[r]){var o=n.data[r];myelements.debug("Storing local data for scope '%s'",r),myelements.debug(n.data[r]),localforage.setItem(r,o,function(){}),t.trigger("dataupdate",n.data),myelements.debug("dataupdate message received from backend. Updating element data"),myelements.updateElementScope(e,n.data)}})}if(n.reactOnUserinput){var r=n.reactOnUserinput;t.on("userinput",function(e,t){localforage.setItem(r,t,function(e){debug("localforage data %s",JSON.stringify(e))}),myelements.send({event:"userinput",data:t,scope:r},function(){})})}n.reactOnPage&&page(n.reactOnPage,function(e){t.trigger("page",e)})},handleFormSubmissions:function(e){var t=$(e),n=t.find("form");n.length&&n.submit(function(){var e=$(this).serializeArray().reduce(function(e,t){return e[t.name]=t.value,e},{});return t.trigger("formsubmit",e),myelements.debug("Avoiding default submit event"),!1})},parseQueryParam:function(e){for(var t=window.location.search.substring(1),n=t.split("&"),r=0;r<n.length;r++){var o=n[r].split("=");if(o[0]==e)return o[1]}},recoverPath:function(){var e=myelements.parseQueryParam("route");e&&(page(e),page())}}),$myelements.trigger("init"),$(function(){$(myelements.selector).each(function(){$(this);myelements.initializeElement(this)}),page()});